---
milestone: v4.2
audited: 2026-02-20T19:30:00Z
status: gaps_found
scores:
  requirements: 4/32
  phases: 2/10
  integration: 6/6
  flows: 2/2
gaps:
  requirements:
    - id: "SESS-01"
      status: "unsatisfied"
      phase: "Phase 18"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 18 not started"
    - id: "SESS-02"
      status: "unsatisfied"
      phase: "Phase 19"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 19 not started"
    - id: "SESS-03"
      status: "unsatisfied"
      phase: "Phase 19"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 19 not started"
    - id: "SESS-04"
      status: "unsatisfied"
      phase: "Phase 20"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 20 not started"
    - id: "BACK-01"
      status: "unsatisfied"
      phase: "Phase 22"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 22 not started"
    - id: "BACK-02"
      status: "unsatisfied"
      phase: "Phase 21"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 21 not started"
    - id: "BACK-03"
      status: "unsatisfied"
      phase: "Phase 22"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 22 not started"
    - id: "BACK-04"
      status: "unsatisfied"
      phase: "Phase 22"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 22 not started"
    - id: "LIFE-01"
      status: "unsatisfied"
      phase: "Phase 23"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 23 not started"
    - id: "LIFE-02"
      status: "unsatisfied"
      phase: "Phase 23"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 23 not started"
    - id: "LIFE-03"
      status: "unsatisfied"
      phase: "Phase 23"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 23 not started"
    - id: "LIFE-04"
      status: "unsatisfied"
      phase: "Phase 23"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 23 not started"
    - id: "LIFE-05"
      status: "unsatisfied"
      phase: "Phase 23"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 23 not started"
    - id: "DDELEG-01"
      status: "unsatisfied"
      phase: "Phase 24"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 24 not started"
    - id: "DDELEG-02"
      status: "unsatisfied"
      phase: "Phase 24"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 24 not started"
    - id: "DDELEG-03"
      status: "unsatisfied"
      phase: "Phase 24"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 24 not started"
    - id: "TRUNK-01"
      status: "unsatisfied"
      phase: "Phase 21"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 21 not started"
    - id: "TRUNK-02"
      status: "unsatisfied"
      phase: "Phase 18"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 18 not started"
    - id: "COEX-01"
      status: "unsatisfied"
      phase: "Phase 20"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 20 not started"
    - id: "COEX-02"
      status: "unsatisfied"
      phase: "Phase 20"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 20 not started"
    - id: "COEX-03"
      status: "unsatisfied"
      phase: "Phase 20"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 20 not started"
    - id: "SMBKRB-01"
      status: "unsatisfied"
      phase: "Phase 25"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 25 not started"
    - id: "SMBKRB-02"
      status: "unsatisfied"
      phase: "Phase 25"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 25 not started"
    - id: "TEST-01"
      status: "unsatisfied"
      phase: "Phase 25"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 25 not started"
    - id: "TEST-02"
      status: "unsatisfied"
      phase: "Phase 25"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 25 not started"
    - id: "TEST-03"
      status: "unsatisfied"
      phase: "Phase 25"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 25 not started"
    - id: "TEST-04"
      status: "unsatisfied"
      phase: "Phase 25"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 25 not started"
    - id: "TEST-05"
      status: "unsatisfied"
      phase: "Phase 25"
      claimed_by_plans: []
      completed_by_plans: []
      verification_status: "missing"
      evidence: "Phase 25 not started"
  integration: []
  flows: []
tech_debt: []
---

# v4.2 Milestone Audit: NFSv4.1 Sessions

**Audited:** 2026-02-20
**Status:** gaps_found (milestone in progress — 2/10 phases complete)

## Executive Summary

Milestone v3.0 "NFSv4.1 Sessions" has completed the first 2 of 10 phases, delivering the foundational type system (Phase 16) and session data structures (Phase 17). The completed work is **high quality** — both phases passed verification with no anti-patterns, no tech debt, and clean cross-phase integration. The 28 unsatisfied requirements are all mapped to phases 18-25 which have not yet been started.

## Requirements Coverage

### Satisfied (4/32)

| REQ-ID | Description | Phase | VERIFICATION | SUMMARY | REQUIREMENTS | Status |
|--------|-------------|-------|-------------|---------|--------------|--------|
| SESS-05 | NFSv4.1 constants, types, XDR structures | Phase 16 | passed | listed | [x] | **satisfied** |
| EOS-01 | Slot table caches COMPOUND response for replay | Phase 17 | passed | listed | [x] | **satisfied** |
| EOS-02 | Sequence ID validation (retries, misordered, stale) | Phase 17 | passed | listed | [x] | **satisfied** |
| EOS-03 | Dynamic slot count via target_highest_slotid | Phase 17 | passed | listed | [x] | **satisfied** |

### Unsatisfied (28/32) — Phases Not Started

| REQ-ID | Description | Assigned Phase | Reason |
|--------|-------------|---------------|--------|
| SESS-01 | EXCHANGE_ID client registration | Phase 18 | Not started |
| SESS-02 | CREATE_SESSION with channel negotiation | Phase 19 | Not started |
| SESS-03 | DESTROY_SESSION teardown | Phase 19 | Not started |
| SESS-04 | SEQUENCE as gating operation | Phase 20 | Not started |
| BACK-01 | CB_SEQUENCE over existing TCP | Phase 22 | Not started |
| BACK-02 | BIND_CONN_TO_SESSION | Phase 21 | Not started |
| BACK-03 | BACKCHANNEL_CTL | Phase 22 | Not started |
| BACK-04 | CB_RECALL over backchannel for v4.1 | Phase 22 | Not started |
| LIFE-01 | DESTROY_CLIENTID | Phase 23 | Not started |
| LIFE-02 | RECLAIM_COMPLETE | Phase 23 | Not started |
| LIFE-03 | FREE_STATEID | Phase 23 | Not started |
| LIFE-04 | TEST_STATEID | Phase 23 | Not started |
| LIFE-05 | v4.0-only ops return NOTSUPP for v4.1 | Phase 23 | Not started |
| DDELEG-01 | GET_DIR_DELEGATION | Phase 24 | Not started |
| DDELEG-02 | CB_NOTIFY for directory changes | Phase 24 | Not started |
| DDELEG-03 | Directory delegation state tracking | Phase 24 | Not started |
| TRUNK-01 | Multiple connections per session | Phase 21 | Not started |
| TRUNK-02 | Consistent server_owner for trunking | Phase 18 | Not started |
| COEX-01 | v4.0/v4.1 COMPOUND routing | Phase 20 | Not started |
| COEX-02 | v4.0 unchanged when v4.1 enabled | Phase 20 | Not started |
| COEX-03 | Per-owner seqid bypassed for v4.1 | Phase 20 | Not started |
| SMBKRB-01 | SMB SPNEGO/Kerberos via shared layer | Phase 25 | Not started |
| SMBKRB-02 | Kerberos → control plane identity for SMB | Phase 25 | Not started |
| TEST-01 | E2E with Linux NFS client vers=4.1 | Phase 25 | Not started |
| TEST-02 | EOS replay verification E2E | Phase 25 | Not started |
| TEST-03 | Backchannel delegation recall E2E | Phase 25 | Not started |
| TEST-04 | v4.0/v4.1 coexistence E2E | Phase 25 | Not started |
| TEST-05 | Directory delegation notification E2E | Phase 25 | Not started |

## Phase Verification Status

| Phase | Name | Verification | Score | Status |
|-------|------|-------------|-------|--------|
| 16 | NFSv4.1 Types and Constants | 16-VERIFICATION.md | 9/9 | **PASSED** |
| 17 | Slot Table and Session Data Structures | 17-VERIFICATION.md | 4/4 | **PASSED** |
| 18 | EXCHANGE_ID and Client Registration | — | — | Not started |
| 19 | Session Lifecycle | — | — | Not started |
| 20 | SEQUENCE and COMPOUND Bifurcation | — | — | Not started |
| 21 | Connection Management and Trunking | — | — | Not started |
| 22 | Backchannel Multiplexing | — | — | Not started |
| 23 | Client Lifecycle and Cleanup | — | — | Not started |
| 24 | Directory Delegations | — | — | Not started |
| 25 | v3.0 Integration Testing | — | — | Not started |

## Cross-Phase Integration

**Integration checker result: CLEAN**

| From | To | Via | Status |
|------|----|----|--------|
| Phase 16 SessionId4 | Phase 17 Session struct | import types | **WIRED** |
| Phase 16 ChannelAttrs | Phase 17 NewSession constructor | parameter type | **WIRED** |
| Phase 16 CREATE_SESSION4_FLAG_* | Phase 17 back channel allocation | bitwise check | **WIRED** |
| Phase 16 NFS4ERR_BADSLOT | Phase 17 ValidateSequence | error return | **WIRED** |
| Phase 16 NFS4ERR_SEQ_MISORDERED | Phase 17 ValidateSequence | error return | **WIRED** |
| Phase 16 NFS4ERR_RETRY_UNCACHED_REP | Phase 17 ValidateSequence | error return | **WIRED** |

**Intentionally orphaned (Phase 18+ consumers):** 19 forward-channel + 10 callback operation types with stub handlers returning NFS4ERR_NOTSUPP.

## E2E Flows

| Flow | Path | Status |
|------|------|--------|
| Session Creation Data | ChannelAttrs → NewSession → NewSlotTable → Session.ForeChannelSlots | **COMPLETE** |
| Sequence Validation Error | NFS4ERR_* → ValidateSequence → NFS4StateError → caller | **COMPLETE** |

## Tech Debt

**None.** Both completed phases have zero TODOs, stubs, or deferred items.

## Carried-Forward Tech Debt (from v2.0)

| ID | Description | Origin |
|----|-------------|--------|
| DEBT-01 | ACL enforcement in metadata CheckAccess | v2.0 Phase 13 |
| DEBT-02 | Delegation Prometheus metrics (log scraping workaround) | v2.0 Phase 11 |
| DEBT-03 | Netgroup mount enforcement (CRUD works, enforcement deferred) | v2.0 Phase 14 |

## Anti-Patterns

**None found** in completed phases.

## Conclusion

The completed work (Phases 16-17) is solid and well-tested. All 4 satisfied requirements pass the 3-source cross-reference (VERIFICATION + SUMMARY frontmatter + REQUIREMENTS.md traceability). Cross-phase integration is clean with 6/6 connections verified. The 28 unsatisfied requirements are mapped to phases 18-25 which follow the established dependency chain and are ready to be executed.

---
*Audited: 2026-02-20*
*Auditor: Claude (gsd-audit-milestone)*
