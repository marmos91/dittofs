# Milestone v1.0: E2E Test Suite

**Status:** SHIPPED 2026-02-03
**Phases:** 1-6
**Total Plans:** 17

## Overview

This roadmap delivered a complete E2E test suite that validates DittoFS through the CLI interface. Starting with mount command infrastructure and test framework, we built up through control plane tests (users, groups, stores, shares, adapters) to reach the final goal: verifying all 9 store combinations work correctly with both NFS and SMB protocols.

## Phases

### Phase 1: Foundation
**Goal**: Users can mount/unmount shares via CLI and developers have a working test framework
**Depends on**: Nothing (first phase)
**Requirements**: CLI-01 through CLI-07, FRM-01 through FRM-08
**Plans**: 2 plans

Plans:
- [x] 01-01-PLAN.md — Mount/unmount CLI commands (NFS and SMB support)
- [x] 01-02-PLAN.md — Test framework with Testcontainers integration (helpers package)

### Phase 2: Server & Identity
**Goal**: Server lifecycle is validated and user/group management works via CLI
**Depends on**: Phase 1
**Requirements**: SRV-01 through SRV-05, USR-01 through USR-07, GRP-01 through GRP-07
**Plans**: 3 plans

Plans:
- [x] 02-01-PLAN.md — Server lifecycle tests and CLI helpers infrastructure
- [x] 02-02-PLAN.md — User CRUD and password management tests
- [x] 02-03-PLAN.md — Group CRUD and membership tests

### Phase 3: Stores
**Goal**: All metadata and payload store types can be managed via CLI
**Depends on**: Phase 2
**Requirements**: MDS-01 through MDS-07, PLS-01 through PLS-07
**Plans**: 2 plans

Plans:
- [x] 03-01-PLAN.md — Metadata store CRUD tests (memory, BadgerDB, PostgreSQL)
- [x] 03-02-PLAN.md — Payload store CRUD tests (memory, filesystem, S3)

### Phase 4: Shares & Permissions
**Goal**: Shares can be created with store assignments and permissions control access
**Depends on**: Phase 3
**Requirements**: SHR-01 through SHR-06, PRM-01 through PRM-07
**Plans**: 2 plans

Plans:
- [x] 04-01-PLAN.md — Share CRUD tests (create, list, edit, delete with store assignments)
- [x] 04-02-PLAN.md — Permission management tests (grant/revoke for users and groups)

**Note**: SHR-05/SHR-06 (soft delete with deferred cleanup) deferred - server currently implements hard delete.

### Phase 5: Adapters & Auxiliary
**Goal**: Protocol adapters can be managed dynamically, and backup/restore/multi-context work
**Depends on**: Phase 4
**Requirements**: ADP-01 through ADP-08, BAK-01 through BAK-04, CTX-01 through CTX-05
**Plans**: 3 plans

Plans:
- [x] 05-01-PLAN.md — Protocol adapter lifecycle tests (NFS/SMB enable/disable, hot reload)
- [x] 05-02-PLAN.md — Backup and restore tests (control plane backup, content verification)
- [x] 05-03-PLAN.md — Multi-context management tests (context CRUD, credential isolation)

### Phase 6: File Operations
**Goal**: File operations work via both protocols, cross-protocol interop works, and all 9 store combinations pass
**Depends on**: Phase 5
**Requirements**: NFS-01 through NFS-06, SMB-01 through SMB-06, XPR-01 through XPR-06, ENF-01 through ENF-04, MTX-01 through MTX-09
**Plans**: 5 plans

Plans:
- [x] 06-01-PLAN.md — NFS file operation tests (read, write, delete, mkdir, list, chmod)
- [x] 06-02-PLAN.md — SMB file operation tests (read, write, delete, mkdir, list, chmod)
- [x] 06-03-PLAN.md — Cross-protocol interoperability tests (NFS/SMB cross-access)
- [x] 06-04-PLAN.md — Permission enforcement tests (read-only, no-access, group revocation)
- [x] 06-05-PLAN.md — Store matrix validation tests (all 9 metadata/payload combinations)

---

## Milestone Summary

**Key Decisions:**
- CLI-driven tests (dittofsctl) over direct Go API calls
- Go testing + testify as framework
- Testcontainers for Postgres/S3 (self-contained)
- Shared server model with per-test cleanup
- SMB for permission tests (NFS AUTH_UNIX is UID-based)
- NFS only for store matrix (cross-protocol already validated separately)
- Old tests deleted for clean start

**Issues Resolved:**
- ListPermissions API endpoint missing — added handler
- SMB write permission denied for admin — added root bypass

**Issues Deferred:**
- SHR-05/SHR-06 soft delete — server implements hard delete

---
*For current project status, see .planning/PROJECT.md*

---
*Archived: 2026-02-03 as part of v1.0 milestone completion*
